<!DOCTYPE html>
<html>
<head>
<title>Datos</title>
<meta charset="utf-8">
<style>
    img {
        width: 400px;
    }
</style>
</head>
<body>
<div id="contenedor">
    <form id="formu" method="POST" action="#">
        <h1>多Cual es la capital de Japon?</h1>
        <input type="radio" name="pregunta1" value="mala"><label>Hiroshima</label>
        <br>
        <input type="radio" name="pregunta1" value="mala"><label>Nagasaki</label>
        <br>
        <input type="radio" name="pregunta1" value="buena"><label>Tokyo</label><br>
        <br>
    
        <h1>多Cual es la capita de Espa単a?</h1>
        <input type="radio" name="pregunta2" value="mala"><label>Barcelona</label>
        <br>
        <input type="radio" name="pregunta2" value="buena"><label>Madrid</label>
        <br>
        <input type="radio" name="pregunta2" value="mala"><label>Sevilla</label><br>
        <br>
   
        <h1>多Cual es la capital de EEUU?</h1>
        <input type="radio" name="pregunta3" value="buena"><label>Washington D.C.</label>
        <br>
        <input type="radio" name="pregunta3" value="mala"><label>New York</label>
        <br>
        <input type="radio" name="pregunta3" value="mala"><label>Las Vegas</label><br>
        <br>
        <input type="button" value="Im finished" onClick="Calificacion()">
    </form>
    <div><p id="cali"></p></div>
</div>
    <script>
        //Recogemos la zona donde escribir la nota
        let cali = document.getElementById("cali");
        //Funcion que escribe la nota en caso de que la validacion pase
        let Calificacion = () => {
            //Realizamos la validacion
            if (valCal())
                cali.innerHTML = "Debes responder todas las preguntas"
            else
                cali.innerHTML = nota();
        }   
        
        /*-----------------------------VALIDACIONES---------------------------*/
        
        //Funcion que comprueba si se ha seleccionado una respuesta por pregunta como minimo
        let valCal = () => {
            let cali = document.querySelectorAll("input[type='radio']");
            let cont = 3;
            for(i=0;i<cali.length;i++){
                if (cali[i].checked == true)
                    cont--;
            }
            if (cont == 0)
                return false;
            else
                return true;
        }
    
        /*--------------------------------FIN---------------------------------*/
        
        //Funcion que devuelve la nota en funcion de los aciertos
        let nota = () => {
            let nota = document.querySelectorAll("input[type='radio']");
            let cont = 0;
            for(i=0;i<nota.length;i++) {
                if (nota[i].checked == true && nota[i].value == "buena")
                    cont++;
            }
            if (cont == 3) {
                cali = "<p>Aciertos 3</p>"
                cali += "<p>Gran trabajo</p>"
                cali += "<img src='img/win.gif'>"
                return cali;
            }
            else if (cont == 2 || cont == 1) {
                cali = "<p>Aciertos 1 o 2</p>"
                cali += "<p>Eso esta bien</p>"
                cali += "<img src='img/meh.jpg'>"
                return cali;   
            }
            else {
                cali = "<p>Aciertos 0</p>"
                cali += "<p>Realmente necesitas hacerlo mejor</p>"
                cali += "<img src='img/lose.gif'>"
                return cali;   
            }
        }  
    </script>	
</body>
</html>
