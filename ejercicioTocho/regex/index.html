<!DOCTYPE html>
<html>

<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="css.css">
</head>

<body>
    <div class="container">
        <form action="/action_page.php">
            <label for="usrname">Username</label>
            <input type="text" id="usrname" name="usrname" required>

            <label for="psw">Password</label>
            <input type="password" id="psw" name="psw" pattern="(?=.+[a-z])(?=.+[A-Z])(?=.+[0-9])(?=.+[$@!¡%*#¿?&])(?=.+[^<>^\{\}\(\)\[\]]).{8,}" title="Ocho carácteres, digitos, minus, mayus y caracteres especiales" required>

            <input type="submit" value="Submit">
        </form>
    </div>

    <div id="message">
        <h3>La contraseña tiene que ser del siguiente tipo:</h3>
        <p id="numero" class="invalid">Contener almenos un <b>número</b></p>
        <p id="mayus" class="invalid">Contener almenos una <b>mayuscula</b></p>
        <p id="minus" class="invalid">Contener almenos una <b>minuscula</b></p>
        <p id="tamaño" class="invalid">Tener almenos <b>8 caracteres</b></p>
        <h3>Extras:</h3>
        <p id="especial" class="invalid">Contener almenos un <b>caracter especial</b> ($@!¡%*#¿?&)</p>
        <p id="especial2" class="invalid">No puede contener los <b>caracteres especiales</b> (<>^{}()[])</p>
    </div>
</body>

</html>
<script type="text/javascript">
    var myInput = document.getElementById("psw");
    var numero = document.getElementById("numero");
    var patronnumero = /[0-9]/g;
    var patronmayus = /[A-Z]/g;
    var patronminus = /[a-z]/g;
    var patrontamaño = /.{8,}/g;
    var patronespecial = /[$@!¡%*#¿?&]/g;
    var patronespecial2 = /[<>^\{\}\(\)\[\]]/g;
    
    //Cuando el usuario pulsa sobre la contraseña
    myInput.onfocus = function () {
        document.getElementById("message").style.display = "block";
    }
    // Cuando el usuario pulsa fuera de la contraseña
    myInput.onblur = function () {
        document.getElementById("message").style.display = "none";
    }
    //Se verifica según teclea
    myInput.onkeyup = function () {
        //verificamos el patron con la regex de tipo numerico
        if (myInput.value.match(patronnumero)) {
            //Cambiamos la clase del mensaje
            numero.classList.remove("invalid");
            numero.classList.add("valid");
        } else {
            //Cambiamos la clase del mensaje
            numero.classList.remove("valid");
            numero.classList.add("invalid");
        }

        //verificamos el patron con la regex de mayusculas
        if (myInput.value.match(patronmayus)) {
            //Cambiamos la clase del mensaje
            mayus.classList.remove("invalid");
            mayus.classList.add("valid");
        } else {
            //Cambiamos la clase del mensaje
            mayus.classList.remove("valid");
            mayus.classList.add("invalid");
        }

        //verificamos el patron con la regex de minusculas
        if (myInput.value.match(patronminus)) {
            //Cambiamos la clase del mensaje
            minus.classList.remove("invalid");
            minus.classList.add("valid");
        } else {
            //Cambiamos la clase del mensaje
            minus.classList.remove("valid");
            minus.classList.add("invalid");
        }

        //verificamos el patron con la regex de tamaño
        if (myInput.value.match(patrontamaño)) {
            //Cambiamos la clase del mensaje
            tamaño.classList.remove("invalid");
            tamaño.classList.add("valid");
        } else {
            //Cambiamos la clase del mensaje
            tamaño.classList.remove("valid");
            tamaño.classList.add("invalid");
        }

        //verificamos el patron con la regex de caracteres especiales
        if (myInput.value.match(patronespecial)) {
            //Cambiamos la clase del mensaje
            especial.classList.remove("invalid");
            especial.classList.add("valid");
        } else {
            //Cambiamos la clase del mensaje
            especial.classList.remove("valid");
            especial.classList.add("invalid");
        }

        //verificamos el patron con la regex de caracteres especiales2
        if (!myInput.value.match(patronespecial2)) {
            //Cambiamos la clase del mensaje
            especial2.classList.remove("invalid");
            especial2.classList.add("valid");
        } else {
            //Cambiamos la clase del mensaje
            especial2.classList.remove("valid");
            especial2.classList.add("invalid");
        }
    }
</script>